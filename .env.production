# Production Environment Configuration
# Copy this file to .env for production deployment

# ⚠️ IMPORTANT: Set ENVIRONMENT=production to enable security features
ENVIRONMENT=production

# Server Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
DEBUG_MODE=false

# CORS - Specify allowed frontend domains (comma-separated)
# ⚠️ REQUIRED: Replace with your actual production domains
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Video Configuration
VIDEO_FILE_PATH=/path/to/production/video.mp4

# AI Models - Use absolute paths in production
YOLO_MODEL_PATH=/app/models/yolov8n.pt
POSE_MODEL_PATH=/app/models/yolov8n-pose.pt
ANOMALY_MODEL_PATH=/app/models/stg_nf_trained.pth

# Detection Settings
PERSON_DETECTION_CONFIDENCE=0.45
ANOMALY_THRESHOLD=0.0

# Tracking Settings
TRACKER_MAX_AGE=900
TRACKER_MAX_IOU_DISTANCE=0.9
TRACKER_MAX_COSINE_DISTANCE=0.7

# Frame Buffer
SEQUENCE_LENGTH=30
FRAME_DIGITS=4

# Device Configuration
# Set to cpu if no GPU available in production
DEVICE=cuda:0
# DEVICE=cpu

# Logging
LOG_LEVEL=INFO
ANOMALY_LOG_PATH=/var/log/visiongaurd/anomaly_log.txt
WEBRTC_VERBOSE_LOGGING=false

# AI Processing
ENABLE_AI_PROCESSING=true
PROCESS_EVERY_N_FRAMES=1

# ============================================================================
# Production Deployment Notes
# ============================================================================
#
# 1. HTTPS Required:
#    - WebRTC requires HTTPS in production (not localhost)
#    - Use reverse proxy (nginx/caddy) with SSL certificate
#    - Let's Encrypt for free SSL certificates
#
# 2. CORS Configuration:
#    - ALLOWED_ORIGINS must include your frontend domain(s)
#    - Use HTTPS protocol: https://yourdomain.com
#    - Include www and non-www versions if needed
#
# 3. WebSocket Configuration:
#    - Frontend must use wss:// (secure WebSocket) not ws://
#    - Ensure reverse proxy supports WebSocket upgrades
#
# 4. Security:
#    - Never set ENVIRONMENT=development in production
#    - Keep model files secure and backed up
#    - Use firewall rules to restrict access
#    - Consider rate limiting for API endpoints
#
# 5. Performance:
#    - Models are loaded once at startup (shared across streams)
#    - Monitor memory usage with multiple concurrent streams
#    - Consider horizontal scaling with load balancer
#
# ============================================================================
